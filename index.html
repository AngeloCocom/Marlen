<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>A Place to for you</title>

  <!-- analyze -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-T6FSQJVW7E"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){ dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-T6FSQJVW7E', { 'send_page_view': true });
  </script>

  <style>
    :root{
      --bg:#fbf9f6; --card:#ffffff; --muted:#6b6b6b;
      --accent:#c9a97a;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    html,body{height:100%; margin:0; background:var(--bg); color:#111;}
    .wrap{min-height:100vh; display:flex; align-items:center; justify-content:center; padding:28px;}
    .card{max-width:720px; width:100%; background:var(--card); border-radius:14px; box-shadow:0 10px 30px rgba(0,0,0,0.06); padding:28px;}
    h1{margin:0; font-size:28px; letter-spacing:0.2px;}
    p.lead{margin:10px 0 22px; color:var(--muted);}
    .row{display:flex; gap:10px; flex-wrap:wrap; margin-bottom:18px;}
    button, select{background:#fff;border:1px solid #eee;padding:10px 14px;border-radius:10px;font-size:15px;cursor:pointer;}
    button.primary{background:linear-gradient(180deg, #fff, #fff); border:1px solid var(--accent); box-shadow:0 2px 6px rgba(0,0,0,0.04);}
    .verse{padding:18px;border-radius:10px;border:1px solid #f1f1f1; background:linear-gradient(180deg,#fff,#fbfbfb); margin-bottom:14px; min-height:88px;}
    .ref{font-weight:600; margin-top:8px; color:var(--muted);}
    .muted{color:var(--muted); font-size:14px;}
    footer{margin-top:10px; color:var(--muted); font-size:13px;}
    .small{font-size:13px}
    .center{display:flex; gap:10px; align-items:center; justify-content:center;}
    .fade {opacity:0; transform: translateY(6px); transition:all 400ms cubic-bezier(.2,.9,.2,1);}
    .fade.in{opacity:1; transform:none;}
    .signature{font-family: "Segoe Script", "Pacifico", cursive; color:#8f6b49; font-size:15px;}
  </style>
</head>

<body>

  <!-- Soft Classical Piano Background -->
  <audio id="bgm" autoplay loop volume="0.25">
      <source src="https://cdn.pixabay.com/audio/2023/03/07/audio_6ae2ed7d42.mp3" type="audio/mpeg">
  </audio>

  <script>
    // Reduce initial volume further for safety
    const bgm = document.getElementById('bgm');
    bgm.volume = 0.15;

    // For browsers that block autoplay without interaction
    document.addEventListener('click', () => {
        if (bgm.paused) bgm.play();
    }, { once:true });
  </script>

  <div class="wrap">
    <div class="card" role="main" aria-labelledby="title">
      <h1 id="title">Be still.</h1>
      <p class="lead">A quiet place to read, pray, and remember the good. No pressure. No explanations.</p>

      <!-- Verse area -->
      <div class="verse fade" id="verseBox">
        <div id="verseText" class="muted small">Tap a feeling, then read a verse.</div>
        <div id="verseRef" class="ref"></div>
      </div>

      <!-- Controls -->
      <div class="row">
        <select id="mood" aria-label="How do you feel?">
          <option value="">I feel…</option>
          <option value="anxious">Anxious</option>
          <option value="broken">Broken</option>
          <option value="hopeful">Hopeful</option>
          <option value="grateful">Grateful</option>
          <option value="lost">Lost</option>
        </select>

        <button id="getVerse" class="primary">Read a Verse</button>
        <button id="randomPrayer">Pray (generate)</button>
        <button id="getSign">Ask for a Sign</button>
      </div>

      <div class="row center small muted">
        <div id="lastAction">—</div>
      </div>

      <section id="goodShared" class="fade" style="margin-top:8px;">
        <p class="small muted">We prayed together. We sought God in our quiet moments.</p>
      </section>

      <footer class="muted small">
        <div>May the peace of God guard your heart. — Philippians 4:7</div>
        <div style="margin-top:8px" class="signature">built with love</div>
      </footer>
    </div>
  </div>

<script>
const bibleApiBase = 'https://bible-api.com/';

const curated = {
  anxious: { ref:'Philippians 4:6-7', text:'Be anxious for nothing. Pray. Then God’s peace will guard you.' },
  broken: { ref:'Psalm 34:18', text:'The Lord is close to the brokenhearted and saves those crushed in spirit.' },
  hopeful: { ref:'Jeremiah 29:11', text:'I know the plans I have for you—plans to give you hope and a future.' },
  grateful: { ref:'1 Thessalonians 5:18', text:'Give thanks in all circumstances; this is God’s will for you.' },
  lost: { ref:'Psalm 119:105', text:'Your word is a lamp for my feet, a light on my path.' }
};

const prayers = [
  'Lord, give her the quiet she seeks. Hold her close and calm the storm.',
  'May Your gentle peace rest on her today. Let prayer be her shelter.',
  'Father, heal what I have harmed. Teach me patience and new fruit.',
  'May grace meet her where she is and gently restore what’s broken.'
];

const signs = [
  'Sometimes persistent love is the sign you asked for.',
  'A soft answer, a calm heart—these are small signs of new ways.',
  'Watch for small mercies. God often uses the quietest moments.'
];

function el(id){ return document.getElementById(id); }

function fadeIn(sel){ sel.classList.add('in'); }

function showVerse(text, ref){
  el('verseText').textContent = text;
  el('verseRef').textContent = ref || '';
  fadeIn(el('verseBox'));
}

async function fetchVerse(ref){
  try {
    const encoded = encodeURIComponent(ref);
    const res = await fetch(bibleApiBase + encoded);
    if(!res.ok) throw new Error();
    const j = await res.json();
    if(j && j.text){
      return {text: j.text.trim(), ref: j.reference || ref};
    }
  } catch(e){ return null; }
}

function sendAnalytics(action, details = {}){
  if(typeof gtag === 'function'){
    gtag('event', action, {
      event_category: 'engagement',
      event_label: details.label || '',
      value: 1,
      referrer: document.referrer || 'direct'
    });
  }
}

el('getVerse').addEventListener('click', async ()=>{
  const mood = el('mood').value || 'hopeful';
  el('lastAction').textContent = 'Fetching verse…';
  sendAnalytics('verse_request', {label:mood});

  const mapping = {
    anxious:'Philippians 4:6-7',
    broken:'Psalm 34:18',
    hopeful:'Jeremiah 29:11',
    grateful:'1 Thessalonians 5:18',
    lost:'Psalm 119:105'
  };

  const ref = mapping[mood];
  let v = await fetchVerse(ref);
  if(!v) v = curated[mood];

  showVerse(v.text, v.ref);
  el('lastAction').textContent = `Verse shown — ${v.ref}`;
  sendAnalytics('verse_shown', {label: v.ref});
});

el('randomPrayer').addEventListener('click', ()=>{
  const p = prayers[Math.floor(Math.random()*prayers.length)];
  showVerse(p, 'A short prayer');
  el('lastAction').textContent = 'Prayer generated';
  sendAnalytics('prayer_clicked');
});

el('getSign').addEventListener('click', ()=>{
  const s = signs[Math.floor(Math.random()*signs.length)];
  showVerse(s, 'A gentle sign');
  el('lastAction').textContent = 'Sign shown';
  sendAnalytics('sign_requested');
});

el('mood').addEventListener('keydown', (e)=>{
  if(e.key === 'Enter') el('getVerse').click();
});

setTimeout(()=>{ fadeIn(el('goodShared')); }, 400);
</script>

</body>
</html>


